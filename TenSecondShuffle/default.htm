<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Ten Second Shuffle</title>

    <script src="js/DrawingContext2D.js" type="text/ecmascript"></script>
    <script src="js/Sprite.js" type="text/ecmascript"></script>
    <script src="js/FrameSprite.js" type="text/ecmascript"></script>
    <script src="js/ImageSprite.js" type="text/ecmascript"></script>

    <!-- Games -->
    <script src="js/Arkanoid.js" type="text/ecmascript"></script>

    <script>
        var games = [
            // { id: "Ball Breaker", constructor: BallBreaker, instance: null, rootSprite: null },
            //{ id: "Block Breaker", constructor: BlockBreaker, instance: null, rootSprite: null },
            { id: "Arkanoid", constructor: Arkanoid, instance: null, rootSprite: null }
        ];

        var drawingContext;
        var curGameId = 0;      // Current playable game.

        function init() {
            // Constructor call on all games.
            for (var i = 0; i < games.length; ++i) {
                games[i].instance = new games[i].constructor();
            }
            setupSpriteTree();
            requestAnimationFrame(render);
        }

        function setupSpriteTree() {
            // Render target for all games.
            target = document.getElementById("renderTarget");

            // Initialize all games.
            for (var i = 0; i < games.length; ++i) {
                games[i].instance.init(target);
                games[i].instance.setupGame();
            }
        }

        function render() {
            update();
            draw();

            requestAnimationFrame(render);
        }

        function update() {

            games[curGameId].instance.update();
        }

        function draw() {
            games[curGameId].instance.draw();
        }
    </script>
</head>
<body onload="init();">
    <h1>
        <center>Welcome to Ludum Dare 27 and Ten Second Shuffle</center>
    </h1>

    <canvas id="renderTarget" width="1024" height="768" style="background-color: white;"></canvas>

    <div style="display: none">
        <img id="imgSquare" src="images/stock/square.png" />
    </div>
</body>
</html>
